import * as aggregators from './aggregators';

/**
 * A (singleton) storage for aggregator functions. Stores a mapping of
 * aggregator function names to the actual functions. Provides methods to both
 * register as well as retrieve aggregator functions. Only a single instance is
 * always provided for any module importing this file.
 */
export default {
  store: {},
  _defaultAggregators: aggregators,
  register: function (name, fn) {
    this.store[name] = fn;

    return this;
  },
  getRegisteredAggregations: function () {
    return Object.assign(this.store);
  },
  getDefaultAggregations: function () {
    return Object.assign(this._defaultAggregators);
  },
  resolve: function (name) {
    return this._defaultAggregators[name] || this.store[name];
  }
};
