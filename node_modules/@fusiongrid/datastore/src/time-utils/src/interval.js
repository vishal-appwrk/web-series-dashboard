import { Weekdays } from '../../toolbox/src/index';
import { getDefaultOutputFormat, dateIntervalToString, dateRangeCaclulator } from './datetime-ops';

/**
 * Creates an interval object with a start value, a duration and an outputFormat
 * to be used for formatting the results.
 *
 * @param {number} start The start value for the interval - timestamp or number
 * @param {object} duration The duration object defining the interval duration
 * @param {string} outputFormat The format in string using placeholders
 */
function interval (start, intervalConfig, calculateStart = false) {
  // Check duration object to identify date or number interval
  if (intervalConfig.duration.ms) {
    var { startDate, endDate } = dateRangeCaclulator(start, intervalConfig.duration, intervalConfig.enableUTC, intervalConfig.weekStartFrom || Weekdays.Sunday, calculateStart);

    intervalConfig.outputFormat = intervalConfig.outputFormat || getDefaultOutputFormat(intervalConfig.duration.Unit);

    return {
      start: startDate,
      end: endDate,
      config: intervalConfig,
      toString: dateIntervalToString
    };
  }
}

export { interval };
