<script>
    import DownArrowIcon from '../icons/downArrow.svelte';
    import AutocompleteSelect from "svelte-autocomplete-select";

    export let options;
    export let onChangeHandler;
    export let value;
    export let disabled;

    let dropdownElement;

    function triggerMenuLaunch(){
      dropdownElement && dropdownElement.$$ && dropdownElement.$$.ctx[8].click()
    }

</script>

<div class="fg-select-wrapper">
  {#if disabled}
  <input type="text" {value} disabled class="fg-disabled-input" />
  {:else}
  <AutocompleteSelect
    options={options}
    predicate={results => results}
    onSubmit={onChangeHandler}
    placeholder="Select"
    value={value} 
    {disabled}
    keepValueOnSubmit={true}
    bind:this={dropdownElement}
  />
  {/if}
  <span class="fg-arrow-icon" on:click={triggerMenuLaunch}><DownArrowIcon /></span>
</div>